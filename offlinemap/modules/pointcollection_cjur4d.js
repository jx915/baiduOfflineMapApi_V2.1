_jsload2&&_jsload2('pointcollection', 'x.extend(zc.prototype,{ra:function(a){var b=this;b.map=this.C=a;b.wc=document.createElement("canvas");b.wc.style.cssText="position: absolute; left: 0; top: 0;";b.V=b.wc;a=b.map.Bb();b.wc.width=a.width;b.wc.height=a.height;b.wc.id="myCanvasElement";b.map.Rf().vt.appendChild(b.wc);b.Ay=new Of;b.hi();b.map.addEventListener("click",function(a){a=Pf(b.Ay,a.offsetX,a.offsetY);a!==p&&b.dispatchEvent("click",{point:a.point})});b.Nk=p;b.map.addEventListener("mousemove",function(a){for(var d=b.map.tx(),e=d.length, f=p,g=0;g<e&&!(d[g]instanceof z.PointCollection&&(f=Pf(d[g].Ay,a.offsetX,a.offsetY),f!==p));g++);f===p?(b.Nk!==p&&(b.dispatchEvent("mouseout",{point:b.Nk.point}),b.Nk=p),b.wc.style.cursor=""):(b.Nk===p?(b.dispatchEvent("mouseover",{point:f.point}),b.Nk=f):b.Nk!==f&&(b.dispatchEvent("mouseout",{point:b.Nk.point}),b.dispatchEvent("mouseover",{point:f.point}),b.Nk=f),b.wc.style.cursor="pointer")});return b.wc},hi:function(){this.Ay.data.xF=[];var a=this.map.Bb();this.wc.width=a.width;this.wc.height= a.height;this.wc.style.left=this.map.ve.style.left;this.wc.style.top=this.map.ve.style.top;if(this.ea.ia&&this.ea.ia.length){this.wc.getContext("2d").clearRect(0,0,this.wc.width,this.wc.height);-1!==document.location.href.indexOf(".local")&&(console&&console.time)&&console.time("\\u904d\\u5386\\u7ed8\\u5236\\u9ebb\\u70b9");this.wc.getContext("2d").beginPath();for(var b=0,c;c=this.ea.ia[b];b++){var d=this.map.bc(c);if(!(0>d.x||0>d.y||d.x>a.width||d.y>a.height)){var e;switch(this.z.shape){case 1:e=new Qf; break;case 2:e=new Rf;break;case 4:e=new Sf;break;case 5:e=new Tf;break;case wc:e=new Uf;break;default:e=new Uf}switch(this.z.size){case 1:("circle"===e.type||"star"===e.type)&&e.vf(1);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(2),e.zh(2);break;case 2:("circle"===e.type||"star"===e.type)&&e.vf(2);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(4),e.zh(4);break;case 3:("circle"===e.type||"star"===e.type)&&e.vf(4);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(8),e.zh(8);break;case xc:("circle"=== e.type||"star"===e.type)&&e.vf(5);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(10),e.zh(10);break;case 5:("circle"===e.type||"star"===e.type)&&e.vf(8);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(16),e.zh(16);break;case 6:("circle"===e.type||"star"===e.type)&&e.vf(10);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(20),e.zh(20);break;case 7:("circle"===e.type||"star"===e.type)&&e.vf(15);if("rectangle"===e.type||"rhombus"===e.type)e.Bh(30),e.zh(30);break;default:if(("circle"===e.type||"star"=== e.type)&&e.vf(5),"rectangle"===e.type||"rhombus"===e.type)e.Bh(10),e.zh(10)}this.z.color&&("circle"===e.type||"star"===e.type||"rectangle"===e.type||"rhombus"===e.type)&&e.Jk(this.z.color);e.Jo(this.wc.getContext("2d"),d.x,d.y);e.point=c;this.Ay.data.xF.push(e)}}this.wc.getContext("2d").fillStyle=this.z.color;this.wc.getContext("2d").fill();-1!==document.location.href.indexOf(".local")&&(console&&console.timeEnd)&&console.timeEnd("\\u904d\\u5386\\u7ed8\\u5236\\u9ebb\\u70b9")}},b_:function(a){this.ea.ia= a;this.hi()},xi:function(a){a.color&&(this.z.color=a.color);a.size&&(this.z.size=a.size);a.shape&&(this.z.shape=a.shape);this.hi()},clear:function(){this.ea.ia=[];this.hi()},remove:function(){this.clear();this.wc&&this.wc.parentNode&&this.wc.parentNode.removeChild(this.wc);this.dispatchEvent(new O("onremove"))}});zc.prototype.initialize=zc.prototype.ra;zc.prototype.draw=zc.prototype.hi;zc.prototype.setPoints=zc.prototype.b_;zc.prototype.setStyles=zc.prototype.xi;zc.prototype.clear=zc.prototype.clear; zc.prototype.remove=zc.prototype.remove;function Of(){this.data={xF:[]}}function Pf(a,b,c){for(var d=0,e;e=a.data.xF[d];d++)if(e.uk(),b>e.position.x-e.fp()/2&&b<e.position.x+e.fp()/2&&c>e.position.y-e.uk()/2&&c<e.position.y+e.uk()/2)return e;return p}function Rf(){this.type="waterdrop";this.position={x:0,y:0}}var Vf=document.createElement("img"),Wf=q;Vf.onload=function(){Wf=o};Vf.src=z.ma+"images/point-collection/red-marker-10x13.png";var Xf=document.createElement("img");Xf.onload=s(); Xf.src=z.ma+"images/point-collection/blue-marke-15x16.png";Rf.prototype.Jo=function(a,b,c){var d=this;Wf===q?setTimeout(function(){d.Jo(a,b,c)},10):(d.G1=a,d.position.x=b,d.position.y=c,a.save(),a.translate(b-Vf.width/2,c-Vf.height/2),a.drawImage(Vf,0,0,Vf.width,Vf.height,0,0,Vf.width,Vf.height),a.restore())};Rf.prototype.ha=u("position");Rf.prototype.fp=function(){return Vf.width};Rf.prototype.uk=function(){return Vf.height}; function Uf(a){this.type="circle";a=a||{};this.K={xa:a.radius||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Uf.prototype;da.Jo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.translate(b,c);a.beginPath();a.fillStyle=this.K.color;a.arc(0,0,this.K.xa,0,2*Math.PI,q);a.fill();a.restore()};da.vf=function(a){this.K.xa=a};da.xL=function(){return this.K.xa};da.Jk=function(a){this.K.color=a};da.ha=u("position");da.fp=function(){return 2*this.K.xa};da.uk=function(){return 2*this.K.xa}; function Qf(a){this.type="star";a=a||{};this.K={xa:a.radius||10,TE:a.pointsNumber||5,GW:a.fraction||0.4,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Qf.prototype;da.Jo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.fillStyle=this.K.color;a.beginPath();a.translate(b,c);a.moveTo(0,0-this.K.xa);for(b=0;b<this.K.TE;b++)a.rotate(Math.PI/this.K.TE),a.lineTo(0,0-this.K.xa*this.K.GW),a.rotate(Math.PI/this.K.TE),a.lineTo(0,0-this.K.xa);a.fill();a.restore()}; da.vf=function(a){this.K.xa=a};da.Jk=function(a){this.K.color=a};da.ha=u("position");da.fp=function(){return 2*this.K.xa};da.uk=function(){return 2*this.K.xa};function Sf(a){this.type="rectangle";a=a||{};this.K={width:a.width||10,height:a.height||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Sf.prototype;da.Jo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.translate(b-this.K.width/2,c-this.K.height/2);a.fillStyle=this.K.color;a.fillRect(0,0,this.K.width,this.K.height);a.restore()}; da.Bh=function(a){this.K.width=a};da.fp=function(){return this.K.width};da.zh=function(a){this.K.height=a};da.uk=function(){return this.K.height};da.Jk=function(a){this.K.color=a};da.ha=u("position");function Tf(a){this.type="rhombus";a=a||{};this.K={width:a.width||10,height:a.height||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Tf.prototype; da.Jo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.fillStyle=this.K.color;a.translate(b-this.K.width/2,c-this.K.height/2);a.beginPath();a.moveTo(0+0.5*this.K.width,0);a.lineTo(0,0+0.5*this.K.height);a.lineTo(0+0.5*this.K.width,0+this.K.height);a.lineTo(0+this.K.width,0+0.5*this.K.height);a.lineTo(0+0.5*this.K.width,0);a.closePath();a.fill();a.restore()};da.Bh=function(a){this.K.width=a};da.fp=function(){return this.K.width};da.zh=function(a){this.K.height=a};da.uk=function(){return this.K.height}; da.Jk=function(a){this.K.color=a};da.ha=u("position"); ');
